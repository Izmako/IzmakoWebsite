<!-- Bootstrap core CSS -->
<link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<!-- Fontawesome CSS -->
<link href="/css/all.css" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="/css/style.css" rel="stylesheet">
<link href="/css/ChartPageStyle.css" rel="stylesheet">



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>




<header class="slider-main">
    <div id="carouselExampleIndicators" class="carousel slide carousel-fade" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
            <!-- Slide One - Set the background image for this slide in the line below -->

            <div class="carousel-item active">
                <img src="/images/slider-01.jpg" />
                <div class="carousel-caption d-none d-md-block">
                    <h3>Sağlınız için temiz hava içeren bölgelerde kalın</h3>
                </div>
            </div>
            <!-- Slide Two - Set the background image for this slide in the line below -->
            <div class="carousel-item">
                <img src="/images/slider-02.jpg" />
                <div class="carousel-caption d-none d-md-block">
                    <h3>Yeşili Koruyalım</h3>
                </div>
            </div>
            <!-- Slide Three - Set the background image for this slide in the line below -->
            <div class="carousel-item">
                <img src="/images/slider-03.jpg" />
                <div class="carousel-caption d-none d-md-block">
                    <h3>Kirli havadan uzak duralım</h3>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</header>


    <section style="top : 100px ;margin-bottom : 100px ; position: relative;padding-bottom: 50px;" class="justify-content-center">

        <nav class="main">


            <label class="seciniz" for="districts">İlçe Seçiniz:</label>
            <select name="districts" id="districts" class="select-css mb-3" onchange="a();b();c();d()">

                <option value="seciniz">Seçiniz</option>
                <option value="6b7a9840-1e13-4045-a79d-0f881c4852ad">Sarıyer</option>
                <option value="914b525e-f275-41e1-b45b-118ada8f08c3">Esenler</option>
                <option value="6929a9ca-977d-4cb3-b1b5-26b95f4d4515">Yenibosna</option>
                <option value="377e1216-bcc7-42c0-aad8-4d5b3d602b78">Ümraniye</option>
                <option value="cb4cd1c2-b55b-484f-ac7a-505369405d00">Fatih</option>
                <option value="179cd958-11aa-4e7a-8fa4-6eb2c852c2f6">Beşiktaş</option>
                <option value="ecafeb15-905e-4257-a25a-72accf287e2a">Kadıköy</option>
                <option value="593780cc-69d7-417c-8089-8672c509bc0b">Sultangazi</option>
                <option value="4c41948b-232e-472c-ada9-8f4d575c56ac">Avcılar</option>
                <option value="a30101a6-349c-4f0d-b965-a68f2c6781e9">Üsküdar</option>
                <option value="9e389c7a-45bd-440a-ba2f-db9c60c65a82">Pendik</option>
                <option value="870840e9-b4fb-43e2-b4fa-e62d59703c88">Bağcılar</option>
                <option value="d6838e88-162e-4394-bd3c-efb9de513ac6">Büyükada</option>
                <option value="476aac30-cec4-4dc3-b180-fc1522d8a37c">Arnavutköy</option>
                <option value="30a7a252-f4ea-43f8-a8db-fdea5ca332d3">Tuzla</option>
                <option value="06cf354f-c56f-4375-a6c5-bb3d5e7d649e">Kağıthane</option>
            </select>
            <br />
            <script>


                function a() {
                    var t;
                    if (document.getElementById("date").value == 4) {
                        t = 4;
                    }
                    else {
                        t = 1;
                    }
                    var id = document.getElementById("districts").value;
                    function dateAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        old_date = oldDate.getDate();
                        if (old_date < 10)
                            old_date = "0" + old_date;
                        return old_date;
                    }
                    function monthAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        var old_month = oldDate.getMonth() + 1;
                        if (old_month < 10)
                            old_month = "0" + old_month;
                        return old_month;
                    }
                    function yearAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);
                        var old_year = oldDate.getFullYear();
                        return old_year;
                    }
                    var script = document.createElement('script');
                    $.ajax({
                        type: "POST",
                        url: "https://cors-anywhere.herokuapp.com/https://api.ibb.gov.tr/havakalitesi/OpenDataPortalHandler/GetAQIByStationId?StationId=" + id + "&StartDate="
                            + dateAyarlama(-6 * t) + "." + monthAyarlama(-6 * t) + "." + yearAyarlama(-6 * t) + "%2000:00:00&EndDate=" + dateAyarlama(0) + "." + monthAyarlama(0) + "." + yearAyarlama(0) + "%2000:00:00",
                        dataType: "json",
                        success: function (result, status, xhr) {
                            google.charts.load('current', { 'packages': ['corechart'] });
                            var i = 0;
                            while (i < 145 * t) {
                                if (result[i]["AQI"]["PM10"] == null) {
                                    result[i]["AQI"]["PM10"] = 0;
                                }
                                i += 24 * t;
                            }

                            google.charts.setOnLoadCallback(drawChart);

                            function drawChart() {

                                var data = google.visualization.arrayToDataTable([
                                    ['Tarih', 'PM₁₀'],
                                    [dateAyarlama(-6 * t) + "/" + monthAyarlama(-6 * t), result[0]["AQI"]["PM10"]],
                                    [dateAyarlama(-5 * t) + "/" + monthAyarlama(-5 * t), result[24 * t]["AQI"]["PM10"]],
                                    [dateAyarlama(-4 * t) + "/" + monthAyarlama(-4 * t), result[48 * t]["AQI"]["PM10"]],
                                    [dateAyarlama(-3 * t) + "/" + monthAyarlama(-3 * t), result[72 * t]["AQI"]["PM10"]],
                                    [dateAyarlama(-2 * t) + "/" + monthAyarlama(-2 * t), result[96 * t]["AQI"]["PM10"]],
                                    [dateAyarlama(-1 * t) + "/" + monthAyarlama(-1 * t), result[120 * t]["AQI"]["PM10"]],
                                    [dateAyarlama(0) + "/" + monthAyarlama(0 * t), result[144 * t]["AQI"]["PM10"]]
                                ]);
                                var options = {
                                    title: 'PM₁₀ Oranı (μg/m³)',
                                    curveType: 'function',
                                    legend: { position: 'none' }
                                };

                                var chart = new google.visualization.LineChart(document.getElementById('a_chart'));

                                chart.draw(data, options);
                            }
                        }

                    })
                }
                function b() {
                    var t;
                    if (document.getElementById("date").value == 4) {
                        t = 4;
                    }
                    else {
                        t = 1;
                    }
                    var id = document.getElementById("districts").value;
                    function dateAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        old_date = oldDate.getDate();
                        if (old_date < 10)
                            old_date = "0" + old_date;
                        return old_date;
                    }
                    function monthAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        var old_month = oldDate.getMonth() + 1;
                        if (old_month < 10)
                            old_month = "0" + old_month;
                        return old_month;
                    }
                    function yearAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);
                        var old_year = oldDate.getFullYear();
                        return old_year;
                    }
                    var script = document.createElement('script');
                    $.ajax({
                        type: "POST",
                        url: "https://cors-anywhere.herokuapp.com/https://api.ibb.gov.tr/havakalitesi/OpenDataPortalHandler/GetAQIByStationId?StationId=" + id + "&StartDate="
                            + dateAyarlama(-6 * t) + "." + monthAyarlama(-6 * t) + "." + yearAyarlama(-6 * t) + "%2000:00:00&EndDate=" + dateAyarlama(0) + "." + monthAyarlama(0) + "." + yearAyarlama(0) + "%2000:00:00",
                        dataType: "json",
                        success: function (result, status, xhr) {
                            google.charts.load('current', { 'packages': ['corechart'] });
                            var i = 0;
                            while (i < 145 * t) {
                                if (result[i]["AQI"]["SO2"] == null) {
                                    result[i]["AQI"]["SO2"] = 0;
                                }
                                i += 24 * t;
                            }


                            google.charts.setOnLoadCallback(drawChart);

                            function drawChart() {

                                var data = google.visualization.arrayToDataTable([
                                    ['Tarih', 'SO₂'],
                                    [dateAyarlama(-6 * t) + "/" + monthAyarlama(-6 * t), result[0]["AQI"]["SO2"]],
                                    [dateAyarlama(-5 * t) + "/" + monthAyarlama(-5 * t), result[24 * t]["AQI"]["SO2"]],
                                    [dateAyarlama(-4 * t) + "/" + monthAyarlama(-4 * t), result[48 * t]["AQI"]["SO2"]],
                                    [dateAyarlama(-3 * t) + "/" + monthAyarlama(-3 * t), result[72 * t]["AQI"]["SO2"]],
                                    [dateAyarlama(-2 * t) + "/" + monthAyarlama(-2 * t), result[96 * t]["AQI"]["SO2"]],
                                    [dateAyarlama(-1 * t) + "/" + monthAyarlama(-1 * t), result[120 * t]["AQI"]["SO2"]],
                                    [dateAyarlama(0) + "/" + monthAyarlama(0), result[144 * t]["AQI"]["SO2"]]
                                ]);
                                var options = {
                                    title: 'SO₂ Oranı (μg/m³)',
                                    curveType: 'function',
                                    legend: { position: 'none' }
                                };

                                var chart = new google.visualization.LineChart(document.getElementById('b_chart'));

                                chart.draw(data, options);
                            }
                        }
                    })
                }
                function c() {
                    var t;
                    if (document.getElementById("date").value == 4) {
                        t = 4;
                    }
                    else {
                        t = 1;
                    }
                    var id = document.getElementById("districts").value;
                    function dateAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        old_date = oldDate.getDate();
                        if (old_date < 10)
                            old_date = "0" + old_date;
                        return old_date;
                    }
                    function monthAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        var old_month = oldDate.getMonth() + 1;
                        if (old_month < 10)
                            old_month = "0" + old_month;
                        return old_month;
                    }
                    function yearAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);
                        var old_year = oldDate.getFullYear();
                        return old_year;
                    }
                    var script = document.createElement('script');
                    $.ajax({
                        type: "POST",
                        url: "https://cors-anywhere.herokuapp.com/https://api.ibb.gov.tr/havakalitesi/OpenDataPortalHandler/GetAQIByStationId?StationId=" + id + "&StartDate="
                            + dateAyarlama(-6 * t) + "." + monthAyarlama(-6 * t) + "." + yearAyarlama(-6 * t) + "%2000:00:00&EndDate=" + dateAyarlama(0) + "." + monthAyarlama(0) + "." + yearAyarlama(0) + "%2000:00:00",
                        dataType: "json",
                        success: function (result, status, xhr) {
                            google.charts.load('current', { 'packages': ['corechart'] });
                            var i = 0;
                            while (i < 145 * t) {
                                if (result[i]["AQI"]["O3"] == null) {
                                    result[i]["AQI"]["O3"] = 0;
                                }
                                i += 24 * t;
                            }


                            google.charts.setOnLoadCallback(drawChart);

                            function drawChart() {

                                var data = google.visualization.arrayToDataTable([
                                    ['Tarih', 'O₃'],
                                    [dateAyarlama(-6 * t) + "/" + monthAyarlama(-6 * t), result[0]["AQI"]["O3"]],
                                    [dateAyarlama(-5 * t) + "/" + monthAyarlama(-5 * t), result[24 * t]["AQI"]["O3"]],
                                    [dateAyarlama(-4 * t) + "/" + monthAyarlama(-4 * t), result[48 * t]["AQI"]["O3"]],
                                    [dateAyarlama(-3 * t) + "/" + monthAyarlama(-3 * t), result[72 * t]["AQI"]["O3"]],
                                    [dateAyarlama(-2 * t) + "/" + monthAyarlama(-2 * t), result[96 * t]["AQI"]["O3"]],
                                    [dateAyarlama(-1 * t) + "/" + monthAyarlama(-1 * t), result[120 * t]["AQI"]["O3"]],
                                    [dateAyarlama(0) + "/" + monthAyarlama(0), result[144 * t]["AQI"]["O3"]]
                                ]);
                                var options = {
                                    title: 'O₃ Oranı (μg/m³)',
                                    curveType: 'function',
                                    legend: { position: 'none' }
                                };

                                var chart = new google.visualization.LineChart(document.getElementById('c_chart'));

                                chart.draw(data, options);
                            }
                        }
                    })
                }
                function d() {
                    var t;
                    if (document.getElementById("date").value == 4) {
                        t = 4;
                    }
                    else {
                        t = 1;
                    }
                    var id = document.getElementById("districts").value;
                    function dateAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        old_date = oldDate.getDate();
                        if (old_date < 10)
                            old_date = "0" + old_date;
                        return old_date;
                    }
                    function monthAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);

                        var old_month = oldDate.getMonth() + 1;
                        if (old_month < 10)
                            old_month = "0" + old_month;
                        return old_month;
                    }
                    function yearAyarlama(i) {
                        var oldDate = new Date();
                        var pastDate = oldDate.getDate() + i;
                        oldDate.setDate(pastDate);
                        var old_year = oldDate.getFullYear();
                        return old_year;
                    }
                    var script = document.createElement('script');
                    $.ajax({
                        type: "POST",
                        url: "https://cors-anywhere.herokuapp.com/https://api.ibb.gov.tr/havakalitesi/OpenDataPortalHandler/GetAQIByStationId?StationId=" + id + "&StartDate="
                            + dateAyarlama(-6 * t) + "." + monthAyarlama(-6 * t) + "." + yearAyarlama(-6 * t) + "%2000:00:00&EndDate=" + dateAyarlama(0) + "." + monthAyarlama(0) + "." + yearAyarlama(0) + "%2000:00:00",
                        dataType: "json",
                        success: function (result, status, xhr) {
                            google.charts.load('current', { 'packages': ['corechart'] });
                            var i = 0;
                            while (i < 145 * t) {
                                if (result[i]["AQI"]["NO2"] == null) {
                                    result[i]["AQI"]["NO2"] = 0;
                                }
                                i += 24 * t;
                            }

                            google.charts.setOnLoadCallback(drawChart);

                            function drawChart() {

                                var data = google.visualization.arrayToDataTable([
                                    ['Tarih', 'NO₂'],
                                    [dateAyarlama(-6 * t) + "/" + monthAyarlama(-6 * t), result[0]["AQI"]["NO2"]],
                                    [dateAyarlama(-5 * t) + "/" + monthAyarlama(-5 * t), result[24 * t]["AQI"]["NO2"]],
                                    [dateAyarlama(-4 * t) + "/" + monthAyarlama(-4 * t), result[48 * t]["AQI"]["NO2"]],
                                    [dateAyarlama(-3 * t) + "/" + monthAyarlama(-3 * t), result[72 * t]["AQI"]["NO2"]],
                                    [dateAyarlama(-2 * t) + "/" + monthAyarlama(-2 * t), result[96 * t]["AQI"]["NO2"]],
                                    [dateAyarlama(-1 * t) + "/" + monthAyarlama(-1 * t), result[120 * t]["AQI"]["NO2"]],
                                    [dateAyarlama(0) + "/" + monthAyarlama(0), result[144 * t]["AQI"]["NO2"]]
                                ]);
                                var options = {
                                    title: 'NO₂ Oranı (μg/m³)',
                                    curveType: 'function',
                                    legend: { position: 'none' }
                                };

                                var chart = new google.visualization.LineChart(document.getElementById('d_chart'));

                                chart.draw(data, options);
                            }
                        }

                    })
                }
            </script>
            <label class="tarihTipi" for="date">Listeleme Tarih Tipini Seçiniz:</label>
            <select id="date" class="select-css" onchange="a();b();c();d()">
                <option id="haftalik" value="1">Son 7 Gün</option>
                <option id="aylik" value="4">Son 28 Gün</option>
            </select>
        </nav>
        <article class="main">
            <section class="graphs" style="border: 1px">
                <nav class="graphs1" style="border: 1px solid;">
                    <div id="a_chart" class="graphs"></div>
                </nav>
                <article class="graphs1" style="border: 1px solid;">
                    <div id="b_chart" class="graphs"></div>
                </article>
            </section>
            <section class="graphs" style="border: 1px">
                <nav class="graphs1" style="border: 1px solid;">
                    <div id="c_chart" class="graphs"></div>
                </nav>
                <article class="graphs1" style="border: 1px solid;">
                    <div id="d_chart" class="graphs"></div>
                </article>
            </section>
        </article>
    </section>
   